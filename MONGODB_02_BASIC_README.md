# MongoDB Basic

**Pre-requisites**: The MongoDB container is running.

## In the terminal run the following commands:

```shell
# Accessing the MongoDB shell in the image.
docker start mongodb-shell
docker exec -it mongodb-shell mongosh
```

## Insert and Find commands
```shell
# Show the current database
db

# Refer a new database named as mydb 
use mydb

# Insert a document into the collection myCollection
db.myCollection.insert({ "value": 123 })


# Insert statement structure:

      Collection               Key   Value
          ^                     ^      ^
          |                     |      |         
db . myCollection . insert( {"value": 123} ) 
 |                          |------------|
 |                                 |
 v                                 v        
Database                        Document 

# Find a document from myCollection
db.myCollection.find()
```

## Data types on MongoDB
```shell
use school
show dbs

db.students.insert({ name: "Joao", "age": 12, "hobbies": ["soccer", "swimming"], "is_student": true, "schoolSubjects": { "mathmatics": 9.5, "science": 10} })
db.students.find()

# MongoDB stores the data as bson format (an json extension). See: 
# - bsonspec.org
# - docs.mongodb.com/manual/reference/bson-types

                                                                                            array                                                            document
                       objectId                      string        int                        ^                        boolean      object                      ^
                          ^                            ^            ^                         |                           ^            ^                        |
                          |                            |            |              |--------------------|                 |            |         |----------------------------------|                    
{ _id: ObjectId("63a51ffb5938fba03c5de8c7"), "name": "Joao", "age": 12, "hobbies": ["soccer", "swimming"], "is_student": true, "schoolSubjects": { "mathmatics": 9.5, "science": 10 } }
                                                                                                                     |               |
                                                                                                                     v               v 
                                                                                                                   double           int
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
                                                                    |
                                                                    v
                                                                 Document


# Note:
# The _id field is known as the Primary Key. It is generated by MongoDB and needs to be UNIQUE. 
# However, you can set the value for this.

# Getting _id value
db.students.findOne({ name: 'Joao' })._id

# Getting timestamp when document was inserted
db.students.findOne({ name: 'Joao' })._id.getTimestamp()
```

```shell
# Stopping the MongoDB image
docker stop mongodb-shell
```